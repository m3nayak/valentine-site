* { box-sizing: border-box; }

html, body {
  margin: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;

  /* Pink like before */
  background: linear-gradient(180deg, #fff0f6 0%, #ffe3ef 40%, #ffd6e8 100%);
}

/* =========================
   BACKGROUND LAYERS
========================= */
#heartsCanvas{
  position: fixed;
  inset: 0;
  width: 100vw;
  height: 100vh;
  z-index: 0;
  pointer-events: none;
}

#kissLayer{
  position: fixed;
  inset: 0;
  z-index: 1;
  pointer-events: none;
}

/* ✅ KISSES WERE GONE BECAUSE THIS CSS WAS MISSING */
.kissPop{
  position:absolute;
  width: var(--size);
  height: var(--size);
  opacity: var(--op);
  transform: rotate(var(--rot));
  background-image: var(--img);
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  animation: kissFloat var(--dur) ease-in-out forwards;
  filter: blur(0.2px);
  will-change: opacity, transform;
}

@keyframes kissFloat{
  0%   { transform: rotate(var(--rot)) scale(0.96); opacity:0; }
  12%  { opacity: var(--op); }
  85%  { opacity: var(--op); }
  100% { transform: rotate(var(--rot)) scale(1.03); opacity:0; }
}

/* =========================
   STAGE
========================= */
.stage{
  position: fixed;
  inset: 0;
  z-index: 10;
  display: grid;
  place-items: center;
  padding: 18px;
}

/* =========================
   CARTOON ENVELOPE (LIKE YOUR REF)
========================= */
.cartoonEnvelope{
  position: relative;
  width: min(640px, 92vw);
  aspect-ratio: 16 / 10;
  border-radius: 22px;

  /* soft shadow like sticker */
  filter: drop-shadow(0 34px 60px rgba(0,0,0,0.22));
}

/* paper base with subtle texture */
.envPaper{
  position: absolute;
  inset: 0;
  border-radius: 22px;

  background:
    /* tiny speckles */
    radial-gradient(circle at 18% 22%, rgba(140,90,30,0.12) 0 1px, transparent 2px),
    radial-gradient(circle at 66% 34%, rgba(140,90,30,0.10) 0 1px, transparent 2px),
    radial-gradient(circle at 42% 70%, rgba(140,90,30,0.10) 0 1px, transparent 2px),
    radial-gradient(circle at 80% 72%, rgba(140,90,30,0.10) 0 1px, transparent 2px),
    linear-gradient(180deg, #f4d7a8 0%, #efcc98 100%);

  box-shadow:
    inset 0 0 0 2px rgba(150, 100, 40, 0.22),
    inset 0 18px 26px rgba(255,255,255,0.18);
}

/* folds */
.envFold{
  position: absolute;
  inset: 0;
  border-radius: 22px;
}

.envFoldLeft{
  clip-path: polygon(0 8%, 52% 56%, 0 96%);
  background: linear-gradient(135deg, rgba(0,0,0,0.10), rgba(255,255,255,0.08));
  opacity: 0.9;
}

.envFoldRight{
  clip-path: polygon(100% 8%, 48% 56%, 100% 96%);
  background: linear-gradient(225deg, rgba(0,0,0,0.12), rgba(255,255,255,0.06));
  opacity: 0.9;
}

.envFoldBottom{
  clip-path: polygon(0 100%, 50% 60%, 100% 100%);
  background: linear-gradient(180deg, rgba(255,255,255,0.10), rgba(0,0,0,0.10));
  opacity: 0.92;
}

.envFoldTop{
  clip-path: polygon(0 0, 50% 78%, 100% 0);
  background: linear-gradient(180deg, rgba(255,255,255,0.16), rgba(0,0,0,0.06));
  opacity: 0.55; /* keeps it “closed” but not too harsh */
}

/* =========================
   WAX SEAL (CARTOON SCALLOPED + EMBOSSED HEART)
========================= */
.waxSeal{
  position: absolute;
  left: 42%;
  top: 56%;
  transform: translate(-50%, -50%) rotate(-8deg);
  width: min(140px, 22vw);
  aspect-ratio: 1 / 1;
  z-index: 20;
}

/* scalloped wax edge */
.waxSeal::before{
  content:"";
  position:absolute;
  inset: 0;
  border-radius: 50%;

  /* scallops via repeating “bumps” */
  background:
    radial-gradient(circle at 50% 50%, #ff4b5a 0%, #cc001e 55%, #930016 100%);

  box-shadow:
    0 18px 30px rgba(0,0,0,0.30),
    inset -10px -12px 18px rgba(0,0,0,0.22),
    inset 9px 9px 14px rgba(255,255,255,0.22);

  /* fake scalloped rim by overlaying small bumps */
  -webkit-mask:
    radial-gradient(circle at 50% 50%, #000 63%, transparent 64%) ,
    repeating-radial-gradient(circle at 50% 50%, #000 0 7px, transparent 8px 14px);
  -webkit-mask-composite: source-over;
  mask:
    radial-gradient(circle at 50% 50%, #000 63%, transparent 64%),
    repeating-radial-gradient(circle at 50% 50%, #000 0 7px, transparent 8px 14px);
  mask-composite: add;
}

/* inner pressed disk */
.waxInner{
  position:absolute;
  inset: 16%;
  border-radius: 50%;
  background:
    radial-gradient(circle at 30% 25%, rgba(255,255,255,0.32), transparent 45%),
    radial-gradient(circle at 70% 78%, rgba(0,0,0,0.22), transparent 50%),
    radial-gradient(circle at 50% 50%, #ea0022 0%, #b00018 70%, #840013 100%);
  box-shadow:
    inset -8px -10px 14px rgba(0,0,0,0.25),
    inset 6px 6px 10px rgba(255,255,255,0.12);
}

/* embossed heart (pressed) */
.waxHeart{
  position:absolute;
  left: 50%;
  top: 50%;
  width: 44%;
  height: 40%;
  transform: translate(-50%, -55%) rotate(-45deg);
  border-radius: 12px;
  background: rgba(0,0,0,0.14);
  box-shadow:
    inset 2px 2px 4px rgba(255,255,255,0.10),
    inset -5px -5px 10px rgba(0,0,0,0.30);
}

.waxHeart::before,
.waxHeart::after{
  content:"";
  position:absolute;
  width: 100%;
  height: 100%;
  border-radius: 50%;
  background: rgba(0,0,0,0.14);
  box-shadow:
    inset 2px 2px 4px rgba(255,255,255,0.10),
    inset -5px -5px 10px rgba(0,0,0,0.30);
}

.waxHeart::before{ top: -50%; left: 0; }
.waxHeart::after { top: 0; left: 50%; }

/* =========================
   RESPONSIVE TWEAKS
========================= */
@media (max-width: 520px){
  .waxSeal{ left: 50%; }
}
